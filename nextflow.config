cleanup = true

params {
  out_dir = './output'
  report_dir = './reports'
}

profiles {
  local {
    process {
      executor = 'local'
      // Capture exit codes from upstream processes when piping
      shell = ['/bin/bash', '-euo', 'pipefail']
    }
  }

  lsf {
    includeConfig 'conf/sanger.config'
    process {
      queue = 'imaging'
    }
  }

  docker {
    docker.enabled = true
    singularity.enabled = false
  }

  singularity {
    singularity.enabled = true
    singularity.autoMounts = true
    process {
      containerOptions = "--containall --cleanenv --nv"
    }
  }
}

includeConfig 'conf/module.config'

nextflow.enable.moduleBinaries = true

manifest {
  name = "PaSTa"
  description = "Pan-spatial transcriptomics analysis pipeline"
  author = "Tong LI"
  version = "0.1.1"
}
